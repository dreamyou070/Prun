 present weight dtype = torch.float32
2024-11-02 15:55:49,344 - __main__ - INFO -
 step 3. saving dir
2024-11-02 15:55:49,361 - __main__ - INFO -
 step 5. preparing pruning
Loading pipeline components...:   0%|                                                                                                                                                                                                                                   | 0/6 [00:00<?, ?it/s]/home/dreamyou070/.local/lib/python3.9/site-packages/transformers/models/clip/feature_extraction_clip.py:28: FutureWarning: The class CLIPFeatureExtractor is deprecated and will be removed in version 5 of Transformers. Please use CLIPImageProcessor instead.
  warnings.warn(
Loading pipeline components...: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 6/6 [00:00<00:00,  8.64it/s]
2024-11-02 15:56:00,143 - __main__ - INFO -
 step 5. preparing teacher
Loading pipeline components...: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 6/6 [00:00<00:00, 11.18it/s]
It seems like you have activated model offloading by calling `enable_model_cpu_offload`, but are now manually moving the pipeline to GPU. It is strongly recommended against doing so as memory gains from offloading are likely to be lost. Offloading automatically takes care of moving the individual components vae, text_encoder, tokenizer, unet, motion_adapter, scheduler, feature_extractor, image_encoder to GPU when needed. To make sure offloading works as expected, you should consider moving the pipeline back to CPU: `pipeline.to('cpu')` or removing the move altogether if you use offloading.
2024-11-02 15:56:11,195 - __main__ - INFO -  (5.1) pruning
Traceback (most recent call last):
  File "/home/dreamyou070/Prun/tests/animatelcm_finetune.py", line 495, in <module>
    main(args)
  File "/home/dreamyou070/Prun/tests/animatelcm_finetune.py", line 170, in main
    if len(prun) > 0:
NameError: name 'prun' is not defined
[rank0]: Traceback (most recent call last):
[rank0]:   File "/home/dreamyou070/Prun/tests/animatelcm_finetune.py", line 495, in <module>
[rank0]:     main(args)
[rank0]:   File "/home/dreamyou070/Prun/tests/animatelcm_finetune.py", line 170, in main
[rank0]:     if len(prun) > 0:
[rank0]: NameError: name 'prun' is not defined
